<div metal:use-macro="load: ../shared/_layout.pt">
    <div metal:fill-slot="content">

        <div class="content padded">
            <div class="admin-block">
                <a href="/admin/pages"
                   class="btn btn-info"
                >&#171; Back to pages home</a><br>

                <h1>${"Edit" if page_id else "Add"} CMS page</h1>
                <br>
                <form action="" method="POST">

                    <input type="text" id="title" name="title" class="form-control" value="${title}"
                           placeholder=" Title" title="Title: the title of this CMS page." required>
                    <input type="text" placeholder=" URL: pypi.org/{URL}"
                           title="The URL for the page, e.g. /top/voted"
                           id="url" name="url" class="form-control" value="${url}" required>

                    <textarea name="contents" id="contents" rows="20"
                              placeholder="HTML contents"
                    >${structure:contents}</textarea>

                    <button type="submit" class="btn btn-primary">
                    ${"Update" if page_id else "Create"} page
                    </button>

                    <div class="error-msg" tal:condition="error">
                            ${error}
                    </div>

                    <input tal:condition="page_id" type="hidden" value="${page_id}" name="page_id">

                </form>
            </div>
        </div>

    </div>

    <div metal:fill-slot="additional-css">
        <link href="/static/css/admin.css" rel="stylesheet">
        <link href="/static/node_modules/simplemde/dist/simplemde.min.css" rel="stylesheet">
        <script src="/static/node_modules/simplemde/dist/simplemde.min.js" crossorigin="anonymous"></script>
    </div>

    <div metal:fill-slot="additional-js">
        <script>
            let simplemde = new SimpleMDE({element: document.getElementById("contents")});
        </script>
    </div>

</div>
